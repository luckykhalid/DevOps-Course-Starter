env:
  global:
  - secure: JjbU69ZIQ63AoiN9iBwg3QdbVOmV/mJKdv62CjaliD1iP7Szm0mr8ZZ3zpquxdi+JCVzBqc9nQOmKBtSc+DAK3dtFnr/zq6kboSEexzj92orBgsB4fLyJKky8I0POTLyv/6CGEWKfuF1g1XFjHou/8DQLc6YQ6JSn/lIojPXuJrawb7Dz9HXq87SAZH43m5UPnev0JhlI1ePZiWPPPsgeDKCewioUBWafjx1O6NlI3Ael093HYlST+RgzW4mAWK1j3/fAHLlQlOn6yW+VvZhyaqToQ0cyqM0GQYIwo53q/ssjiUeaiEQKI7qpH/zhxfHaRJ0qfHrBxnMf69WC08V1DjlBuUwKOuWDU9VxeCcXFYxHdPApSmw68C5bMr7baaYeHmUrpeldox6gFyElxj8QLiFAFIEC4Qi3x24m8er8FtP8dPgSyfttBdF6znAPQFDKWPA4XuIN2x9IARbITElcH0tEAg8YmkK0ImCANV3x/gzMlRSyEiUzI3o+IYtmf66xa4yvW2ldCfFWaTAPIbVSPOKHCm+SFZEhfP8YbagTpzJGkHEmuG7ezMmBkN/F12jwNS1zE0w4KDF0TvaRjgzltawvKmuE5fy9pp3QHGy6m5W+b8v/NwneM4f7EifXXwMNAAxEbiFwSEaZHqNQaodAq/QIdBKqv0NJfbj+UJD08k=
  - secure: iw8myqVzISlbC+L2rMwgNsf/PaLcNTUc1zM4Fas4EAXUepOve3A0bmkXUhCXxV6dncni5/8Y5/ovBWDmiSX8FN8jLzPEYj+/Y3ivul8ofw2T2KYGDTbDLXbK9DNDRIuiN1jE49L6azJ8skDb6rBV8bq70gcW5pGKq/R/TZwY7ZYX/i4jZh0wnuq3WjE855k6be5Svqguc+LHh7ddud2S1R6/SLQLuMmEQ1wN+OogSKTz8KAdrcuh2ZYqvsdhXjWXX3Hb9GWvXYxrMuNbFhbhbG9bN1UqCxCapIQvNzJ4jRDt1LcqXthqBJDvTQ19/PCP7TjCezPqL9GWlmQOpPNH0n9D9nL8n/J42w2+mscHH6NbpLfvOTq0b9mX7pH5t4l1NECQu6U8mDTjgFGb8No8miZp2gbSuLPo3nYZtl/EB07Gfu/roPrQazzknIUcvbc4SijHcpRxOvnzYoUu4YIqZDwJsfYo1wfviJ1dxzZwfMNGXJ+VIFnMPJfGAEsShiesUt+ePzzFWGu6YZUvrcG/9K9YjGsOx4cnZBdEygQW9s3B4fQrsbao6QY+M972YnHR+G6PMI35DRS4+NJli3Irv+GxAIK6IFvPa10UijWOwnLysSTpiPD5u3SSSsmBHGkiAla+jcZ3tIFMLApBhtEVwWLsq01R4MOekeD7l/jna7c=
  - secure: oC18EAj4W0vbA9Z9wgS8cXnp4EgGa91xsNkFx4BTc+2zY3UOk6qr+AVRmm09phpStOyNxOijsSloDKhfuB6fQRlv3XDoEIqhrKrA16M6oUltkOJOfa+dxVaeHf4Jd0Pu4Z5QFrFl6gx4oJCAsmJ/vnwoF7+LbM1YNVBz0A4HAut/JVDFqkLACRPJw82F10a03XT6p0yephWqzxCCCsqrQJOCIDBzeiG6WGnPlb++RFQUe6+9GlTAWpm9rOWOEUHoi13mcJyaJn1XUUWTgE0jXYXUMnx8/zQaL5RyEdd9gzOo4B/TR0IoWf4PylkG3936aZJFrg3PRkPs5NxOkFupKOqGGL2pCaN4J0SjIF+z0fYAyqij4NhF/Gr6uWmuxbcllGrhq5Ua2JK3QWJKWm/jt/l3Ulw1Yx4Dt3H5P4+5X+b2saJiEXm18HYPL3MbBDGTe6zNOX2CxapAX2G6hKKSXcHm1azHtl4m6xZLs1G0dBUjEPstF6uZWZ2C5CaLfnxridNm7bLci6k6nr40ARmY/BCbJN/OMnO9HhsgMwYXO3iwtOOGJJPAdPRu6K0+zNvk4to79sLZSJuJrHNV1YwvRbAt92zmAUExHC12iqL4mh9bQmLbXn9yhsh9jBbcxYbKmhFJTX+hqfZE9drErJ9cKHZJw7qnn7FKLJKiq375k7U=
  - secure: I9YCyTjhIkracIXLp29l+hyoGa1cJnVaFELVtG0guv+GpUpuUIxVBMbR7v4EXElX6W/ihGgOf1xKZVdwDSpBPqsn2qKZhTBJkNIfmPqKavlWUcfHT+HBeVybt4QqkmumuoyXLZOfyfvc/M1otlhdSpiJ3kqTp9jeBDoyxT4nwRLnw8dtF4r4gRaolr3TfRrOkndAMuV8QttMzT2g91YoNBVlB8e9WzCTpY+ilnjbgUR73qNJVuT3P88vsh/8vPeTtB2QAum8KK//kcjoKwW75MoT8osR5g3ahU/0OdbGDJsSuCgGyo7Wil1BoiHvpswZplTbxuyq5xFULZhkOelnFF3Be43B4DOO+zQMD8zAAavUO2ZUXO6j6qlmoJNJx1dtT7ZeEwNv3pQSNfcVpwd8olgKeR0NLFd67xgwDly2uCNL7o7/S1Kcc0B0FdaOo2AoxUU/+cldThXhyt4ceoqIe9LtS/xyFCwAJW1d+MFlg1jBCQ2/Jhrh/YNCAsDqndDIUMruecLDVNrZvx9pBEiOBE3aoIK5Qa+lZXTv+o61i2NUeC/g9b8wE44rEKoxRrI+rNVI8JfNaKcD9/10eUQqjcx+dlL31TCtwZydUid2DpjHh4c6QgYxAYTRQeCen2WSi/NOnJXFEoBlluWIOhfqWuihkk0dwf7ZXevueiLX9Q0=
services:
- docker
script:
- docker build --target test --tag todo_app:test .
- docker run --env-file .env.test todo_app:test tests
- docker run -e SECRET_KEY -e TRELLO_KEY -e TRELLO_TOKEN -e BOARD_ID todo_app:test tests_e2e
notifications:
  slack:
    secure: o5cEaHOFMzW435cV5zT/4MaoyHC3X3DS9091yDH6SxwLy6F/rngAy5EwDZ53opq/YdWYyGhlumsiZFfVyI2qpyZSkE2Epk9p35YT0Gdx/x9oad91G8PeyaWSBN2GWfceZ/qBxTfamyACUPr2ItWi7oPw65RnYM/kRcbfmXnxC9bqQcDX0bLWVDRZtVmmsZJ0kNnCwznsBb9gpVV7Vz3ZVhv9QvFoYPyIDdyMT2vlYHu/iQ8FJIX9eKuYuqViklUiwWYIejUqp7892x3m5Bywm7e0Y0NqXmWbXsiW8MizQsn9E6M93Ed4+xNyKWz7f6O7GvVZm1GmdyH5FPB3Nz38FxOy6e4bYC8r399DJISZl0VMYtqDhKndoqRvSpR4tvvmad5x37mAMs2o1IpRc2OQTJ5Rtz54Hqw+gAHa3lvyFuz1QvMjaZnp9zXLy6dJYF6VIJu6FKDKQJwLbiYio18EqkxauxUGM0VB+12JiVds53aXNqlPkqopzhNdCKnSUlKH0yho6SJzzyYRnKG9vOGaIbx88Sf+PrEIYylXdFlsfH/I3bhFMkRN2EoHZpYaaDXPqxk/IXCUHNHU39cuu9CpQYFXt3rlirljBD/o2Oi3oiMXT36jFL37Oc4C3jxiv2cj0LLacgB/e0qwGqhjqjLerKiYPjh1vvdOt9aGvpXcIAA=
